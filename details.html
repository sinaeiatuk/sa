<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ±Ø´Ø©</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>

/* --- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª --- */
* { box-sizing: border-box; }
body {
    background: radial-gradient(circle at top right, #1e1b4b 0%, #0b0f19 70%) fixed;
    color: #f8fafc;
    margin: 0;
    font-family: 'Cairo', sans-serif;
    direction: rtl;
}

.container {
    max-width: 850px;
    margin: auto;
    padding: 20px;
}

/* --- Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ Ø§Ù„ÙØ®Ù… --- */
.back {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50px; /* Ø´ÙƒÙ„ Ø¨ÙŠØ¶Ø§ÙˆÙŠ ÙØ®Ù… */
    color: #fff;
    text-decoration: none;
    backdrop-filter: blur(15px);
    transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    margin-bottom: 30px;
    font-size: 0.9rem;
}
.back:hover {
    background: rgba(99, 102, 241, 0.2); /* Ù„Ù…Ø³Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙˆÙ… */
    border-color: rgba(99, 102, 241, 0.5);
    transform: translateX(8px);
}

/* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
h1 {
    font-size: 2.5rem;
    font-weight: 900;
    background: linear-gradient(135deg, #ffffff 0%, #a5b4fc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
}

.desc {
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 30px;
    border-radius: 24px;
    line-height: 1.8;
    color: #e2e8f0;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

/* --- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© Ø§Ù„Ù…Ù„ÙˆÙ†Ø© --- */
.actions {
    display: flex;
    gap: 15px;
    margin-top: 35px;
}

.actions a {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 18px;
    border-radius: 20px;
    text-decoration: none;
    font-weight: 800;
    transition: 0.4s;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ÙˆØ§ØªØ³Ø§Ø¨ Ø²Ø¬Ø§Ø¬ÙŠ */
.whatsapp {
    background: rgba(34, 197, 94, 0.1) !important;
    color: #4ade80 !important;
    border-color: rgba(34, 197, 94, 0.2) !important;
}
.whatsapp:hover {
    background: rgba(34, 197, 94, 0.2) !important;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(34, 197, 94, 0.2);
}

/* Ø®Ø±ÙŠØ·Ø© Ø²Ø¬Ø§Ø¬ÙŠØ© */
.map {
    background: rgba(59, 130, 246, 0.1) !important;
    color: #60a5fa !important;
    border-color: rgba(59, 130, 246, 0.2) !important;
}
.map:hover {
    background: rgba(59, 130, 246, 0.2) !important;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
}

/* --- Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± --- */
.slider {
    border-radius: 30px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin: 25px 0;
}
.slides img {
    width: 100%;
    max-height: 500px;
    object-fit: cover;
}

@media (max-width: 768px) {
    h1 { font-size: 1.8rem; }
    .actions { flex-direction: column; }
    .back { padding: 10px 20px; }
}
/* ØªØµÙ…ÙŠÙ… Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    #loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(11, 15, 25, 0.8); /* Ù†ÙØ³ Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ù…ÙˆÙ‚Ø¹Ùƒ */
    backdrop-filter: blur(15px); /* ØªØ£Ø«ÙŠØ± Ø¶Ø¨Ø§Ø¨ÙŠ ÙØ®Ù… */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* Ø¹Ø´Ø§Ù† ÙŠÙƒÙˆÙ† ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
    transition: opacity 0.5s ease;
}

.loader-content {
    text-align: center;
    color: #f8fafc;
}

/* Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
.spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(255, 255, 255, 0.1);
    border-top: 3px solid #38bdf8; /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ */
    border-radius: 50%;
    margin: 0 auto 15px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
.ios-share-btn {
    position: absolute;
    /* Ø¹Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… Ù‡Ù†Ø§ Ù„ØªÙ†Ø§Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ */
    top: 20px; 
    left: 20px; 
    
    width: 42px;
    height: 42px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 12px;
    color: #ffffff;
    cursor: pointer;
    z-index: 1000;
    transition: all 0.3s ease;
}

/* Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ¯Ø§Ø®Ù„ Ù…Ø¹ Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 768px) {
    .ios-share-btn {
        top: 20px;
        left: 15px;
    }
}
</style>
</head>

<body>
  <body dir="rtl">
    <div id="loading-screen">
        <div class="loader-content">
            <div class="spinner"></div>
            <p>Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù…Ù† ÙØ¶Ù„Ùƒ...</p>
        </div>
    </div>
<div class="container">
  <a class="back" href="index.html">â† Ø±Ø¬ÙˆØ¹</a>
    <button id="share-btn" class="ios-share-btn">
    <svg viewBox="0 0 24 24" width="22" height="22" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
        <polyline points="16 6 12 2 8 6"></polyline>
        <line x1="12" y1="2" x2="12" y2="15"></line>
    </svg>
</button>

  <h1 id="name"></h1>
  <div class="desc" id="spec"></div>

  <div class="slider" id="slider">
    <div class="slides" id="slides"></div>
  </div>
  <div class="dots" id="dots"></div>

  <div class="actions">
    <a id="whatsapp" class="whatsapp" target="_blank">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</a>
    <a id="map" class="map" target="_blank">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
  </div>

  <div class="views" id="views"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import {
  getFirestore, doc, getDoc, updateDoc, increment
} from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBdhesRwD2eiDvqqcMGhC59U4whICwTO3E",
  authDomain: "sanaeya-samtah.firebaseapp.com",
  projectId: "sanaeya-samtah",
  storageBucket: "sanaeya-samtah.firebasestorage.app",
  messagingSenderId: "1092994215610",
  appId: "1:1092994215610:web:e68b5a3eccb24235d39c83"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const id = new URLSearchParams(location.search).get("id");
if(!id) location.href="index.html";

const ref = doc(db,"workshops",id);
const snap = await getDoc(ref);
if(!snap.exists()) location.href="index.html";

const w = snap.data();

/* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª */
await updateDoc(ref,{ views: increment(1) });

document.getElementById("name").innerText = w.name;
document.getElementById("spec").innerText = w.spec;
document.getElementById("whatsapp").href = "https://wa.me/966"+w.phone;
document.getElementById("map").href = w.map;
document.getElementById("views").innerText = "ğŸ‘ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: " + (w.views+1);

/* Ø³Ù„Ø§ÙŠØ¯Ø± */
const slides = document.getElementById("slides");
const dots = document.getElementById("dots");

(w.images||[]).forEach((img,i)=>{
  slides.innerHTML += `<img src="${img}">`;
  dots.innerHTML += `<div class="dot ${i==0?'active':''}"></div>`;
});
const loader = document.getElementById('loading-screen');
    if (loader) {
        loader.style.opacity = '0';
        setTimeout(() => { 
            loader.style.display = 'none'; 
        }, 500);
    }
let index=0,startX=0;

const go=i=>{
  index=i;
  slides.style.transform=`translateX(${index*100}%)`;
  document.querySelectorAll(".dot").forEach((d,n)=>d.classList.toggle("active",n===i));
};

document.querySelectorAll(".dot").forEach((d,i)=>d.onclick=()=>go(i));

slides.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
slides.addEventListener("touchend",e=>{
  const diff=startX-e.changedTouches[0].clientX;
  if(diff>50 && index<slides.children.length-1) go(index+1);
  if(diff<-50 && index>0) go(index-1);
});
document.getElementById("share-btn").onclick = async () => {
    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ±Ø´Ø© Ù…Ù† Ø§Ù„Ù…ØªØºÙŠØ± w Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø£ØµÙ„Ø§Ù‹ ÙÙŠ ÙƒÙˆØ¯Ùƒ
    const title = "ÙˆØ±Ø´Ø© " + document.getElementById("name").innerText;
    const text = "Ø´Ø§Ù‡Ø¯ ØªÙØ§ØµÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ±Ø´Ø© Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹ ØµÙ†Ø§Ø¹ÙŠØªÙƒ:";
    const url = window.location.href;

    if (navigator.share) {
        try {
            await navigator.share({ title, text, url });
        } catch (err) {
            console.log("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©");
        }
    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø£Ùˆ Ù…ØªØµÙØ­ Ù‚Ø¯ÙŠÙ…ØŒ ÙŠÙ†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        try {
            await navigator.clipboard.writeText(`${text} \n ${url}`);
            alert("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ±Ø´Ø© Ø¨Ù†Ø¬Ø§Ø­ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙ‡!");
        } catch (copyErr) {
            alert("Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ±Ø´Ø© Ù‡Ùˆ: " + url);
        }
    }
};
</script>
</body>
</html>


<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙˆØ±Ø´Ø©</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>

/* --- Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª --- */
* { box-sizing: border-box; }
body {
    background: radial-gradient(circle at top right, #1e1b4b 0%, #0b0f19 70%) fixed;
    color: #f8fafc;
    margin: 0;
    font-family: 'Cairo', sans-serif;
    direction: rtl;
}

.container {
    max-width: 850px;
    margin: auto;
    padding: 20px;
}

/* --- Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ Ø§Ù„ÙØ®Ù… --- */
.back {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50px; /* Ø´ÙƒÙ„ Ø¨ÙŠØ¶Ø§ÙˆÙŠ ÙØ®Ù… */
    color: #fff;
    text-decoration: none;
    backdrop-filter: blur(15px);
    transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    margin-bottom: 30px;
    font-size: 0.9rem;
}
.back:hover {
    background: rgba(99, 102, 241, 0.2); /* Ù„Ù…Ø³Ø© Ø¨Ù†ÙØ³Ø¬ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙˆÙ… */
    border-color: rgba(99, 102, 241, 0.5);
    transform: translateX(8px);
}

/* --- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --- */
h1 {
    font-size: 2.5rem;
    font-weight: 900;
    background: linear-gradient(135deg, #ffffff 0%, #a5b4fc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 20px;
}

.desc {
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 30px;
    border-radius: 24px;
    line-height: 1.8;
    color: #e2e8f0;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

/* --- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© Ø§Ù„Ù…Ù„ÙˆÙ†Ø© --- */
.actions {
    display: flex;
    gap: 15px;
    margin-top: 35px;
}

.actions a {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 18px;
    border-radius: 20px;
    text-decoration: none;
    font-weight: 800;
    transition: 0.4s;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ÙˆØ§ØªØ³Ø§Ø¨ Ø²Ø¬Ø§Ø¬ÙŠ */
.whatsapp {
    background: rgba(34, 197, 94, 0.1) !important;
    color: #4ade80 !important;
    border-color: rgba(34, 197, 94, 0.2) !important;
}
.whatsapp:hover {
    background: rgba(34, 197, 94, 0.2) !important;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(34, 197, 94, 0.2);
}

/* Ø®Ø±ÙŠØ·Ø© Ø²Ø¬Ø§Ø¬ÙŠØ© */
.map {
    background: rgba(59, 130, 246, 0.1) !important;
    color: #60a5fa !important;
    border-color: rgba(59, 130, 246, 0.2) !important;
}
.map:hover {
    background: rgba(59, 130, 246, 0.2) !important;
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
}

/* --- Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± --- */
.slider {
    border-radius: 30px;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin: 25px 0;
}
.slides img {
    width: 100%;
    max-height: 500px;
    object-fit: cover;
}

@media (max-width: 768px) {
    h1 { font-size: 1.8rem; }
    .actions { flex-direction: column; }
    .back { padding: 10px 20px; }
}
.share-btn {
    background: rgba(255, 255, 255, 0.05) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(10px);
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    border-radius: 18px;
    text-decoration: none;
    font-weight: 700;
    transition: 0.3s;
}

.share-btn:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    transform: translateY(-3px);
}
/* --- ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ø¨Ø¶ Ù„Ù„Ø£Ø²Ø±Ø§Ø± (ÙŠØ¹Ø·ÙŠ Ø­ÙŠØ§Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹) --- */
.whatsapp {
    animation: pulse-green 2s infinite;
}

.map {
    animation: pulse-blue 2s infinite;
}

@keyframes pulse-green {
    0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
    100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}

@keyframes pulse-blue {
    0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
    100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
}

/* --- ØªÙ†Ø³ÙŠÙ‚ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØµØºÙŠØ± --- */
.map-group {
    flex: 1;
    position: relative;
    display: flex;
}

#shareBtn {
    position: absolute;
    bottom: 5px;
    right: 5px;
    width: 32px;
    height: 32px;
    background: rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    z-index: 5;
    transition: 0.3s ease;
}

#shareBtn:hover {
    background: rgba(255, 255, 255, 0.4) !important;
    transform: scale(1.1);
}
</style>
</head>

<body>
<div class="container">
  <a class="back" href="index.html">â† Ø±Ø¬ÙˆØ¹</a>

  <h1 id="name"></h1>
  <div class="desc" id="spec"></div>

  <div class="slider" id="slider">
    <div class="slides" id="slides"></div>
  </div>
  <div class="dots" id="dots"></div>

  <div class="actions">
    <a id="whatsapp" class="whatsapp" target="_blank"> ÙˆØ§ØªØ³Ø§Ø¨ğŸ’¬</a>
    <a id="map" class="map" target="_blank">  Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆØ±Ø´Ø©ğŸ“</a>
  </div>
  <div class="actions">
    <a href="#" class="share-btn" onclick="shareWorkshop(event)">
        <span>Ù…Ø´Ø§Ø±ÙƒØ© Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙˆØ±Ø´Ø©ğŸ“</span>
        <i class="fas fa-share-alt"></i> </a>
</div>


  <div class="views" id="views"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
import {
  getFirestore, doc, getDoc, updateDoc, increment
} from "https://www.gstatic.com/firebasejs/10.6.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBdhesRwD2eiDvqqcMGhC59U4whICwTO3E",
  authDomain: "sanaeya-samtah.firebaseapp.com",
  projectId: "sanaeya-samtah",
  storageBucket: "sanaeya-samtah.firebasestorage.app",
  messagingSenderId: "1092994215610",
  appId: "1:1092994215610:web:e68b5a3eccb24235d39c83"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const id = new URLSearchParams(location.search).get("id");
if(!id) location.href="index.html";

const ref = doc(db,"workshops",id);
const snap = await getDoc(ref);
if(!snap.exists()) location.href="index.html";

const w = snap.data();

/* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª */
await updateDoc(ref,{ views: increment(1) });

document.getElementById("name").innerText = w.name;
document.getElementById("spec").innerText = w.spec;
document.getElementById("whatsapp").href = "https://wa.me/966"+w.phone;
document.getElementById("map").href = w.map;
document.getElementById("views").innerText = "ğŸ‘ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª: " + (w.views+1);

/* Ø³Ù„Ø§ÙŠØ¯Ø± */
const slides = document.getElementById("slides");
const dots = document.getElementById("dots");

(w.images||[]).forEach((img,i)=>{
  slides.innerHTML += `<img src="${img}">`;
  dots.innerHTML += `<div class="dot ${i==0?'active':''}"></div>`;
});

let index=0,startX=0;

const go=i=>{
  index=i;
  slides.style.transform=`translateX(${index*100}%)`;
  document.querySelectorAll(".dot").forEach((d,n)=>d.classList.toggle("active",n===i));
};

document.querySelectorAll(".dot").forEach((d,i)=>d.onclick=()=>go(i));

slides.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
slides.addEventListener("touchend",e=>{
  const diff=startX-e.changedTouches[0].clientX;
  if(diff>50 && index<slides.children.length-1) go(index+1);
  if(diff<-50 && index>0) go(index-1);
});
function shareWorkshop(event) {
    event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
    
    // Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„ÙˆØ±Ø´Ø© Ù…Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    const workshopName = document.querySelector('h1').innerText;
    const shareData = {
        title: workshopName,
        text: `Ø´Ù Ù‡Ø°ÙŠ Ø§Ù„ÙˆØ±Ø´Ø© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ ØµÙ†Ø§Ø¹ÙŠØªÙƒ: ${workshopName}`,
        url: window.location.href // Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ
    };

    // Ø§Ù„ØªØ£ÙƒØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ¯Ø¹Ù… Ø®Ø§ØµÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (Ø£ØºÙ„Ø¨ Ø§Ù„Ø¬ÙˆØ§Ù„Ø§Øª ØªØ¯Ø¹Ù…Ù‡Ø§)
    if (navigator.share) {
        navigator.share(shareData)
            .then(() => console.log('ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­'))
            .catch((err) => console.log('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:', err));
    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù…Ù‡Ø§ (Ù…Ø«Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±)
        // Ù†Ù‚ÙˆÙ… Ø¨Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        navigator.clipboard.writeText(window.location.href);
        alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ±Ø´Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„Ù‡ Ø§Ù„Ø¢Ù†!');
    }
}
function shareWorkshop(event) {
    event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
    
    // Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„ÙˆØ±Ø´Ø© Ù…Ù† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    const workshopName = document.querySelector('h1').innerText;
    const shareData = {
        title: workshopName,
        text: `Ø´Ù Ù‡Ø°ÙŠ Ø§Ù„ÙˆØ±Ø´Ø© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ ØµÙ†Ø§Ø¹ÙŠØªÙƒ: ${workshopName}`,
        url: window.location.href // Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ
    };

    // Ø§Ù„ØªØ£ÙƒØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ ÙŠØ¯Ø¹Ù… Ø®Ø§ØµÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© (Ø£ØºÙ„Ø¨ Ø§Ù„Ø¬ÙˆØ§Ù„Ø§Øª ØªØ¯Ø¹Ù…Ù‡Ø§)
    if (navigator.share) {
        navigator.share(shareData)
            .then(() => console.log('ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­'))
            .catch((err) => console.log('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:', err));
    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù…Ù‡Ø§ (Ù…Ø«Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±)
        // Ù†Ù‚ÙˆÙ… Ø¨Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        navigator.clipboard.writeText(window.location.href);
        alert('ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ±Ø´Ø©ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„Ù‡ Ø§Ù„Ø¢Ù†!');
    }
}
</script>
</body>
</html>

